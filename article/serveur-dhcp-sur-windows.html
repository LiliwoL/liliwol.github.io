<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

<!--Meta Keywords and Description-->
<meta name="keywords" content="Formateur php symfony BTS Angular VueJS">
<meta name="description" content="">

<!--Favicon-->
<link rel="shortcut icon" href="/_assets/img/favicon.ico" title="Favicon"/>

<link rel="stylesheet" href="/_assets/main.css" />

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Serveur DHCP sur Windows - Supports de cours Nicolas C.</title>
  </head>

  <body>

    <div class="main">

      <nav class="navigation">
        <a href="/">Supports de cours Nicolas C.</a>
      </nav>

      <article>
        <header>
          <h1 class="article-title">Serveur DHCP sur Windows</h1>
          <div class="article-info">
            <div>
              <span
                >Créé le：<time datetime="1662305159285"
                  >2022-09-04 17:25</time
                ></span
              >
              <span
                >Mis à jour：<time datetime="1673970876101"
                  >2023-01-17 16:54</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="somaire">Somaire</h1>
<nav class="table-of-contents"><ul><li><a href="#somaire">Somaire</a></li><li><a href="#installation-serveur-dhcp">Installation serveur DHCP</a><ul><li><a href="#attendu">Attendu</a></li><li><a href="#a-laide-dun-rogramme-simple">A l'aide d'un rogramme simple</a></li><li><a href="#sur-un-serveur-windows-avec-le-service-dhcp">Sur un serveur Windows avec le Service DHCP</a><ul><li><a href="#requis">Requis</a></li><li><a href="#source">Source</a></li><li><a href="#etape-1-adresse-ip-fixe-sur-le-serveur">Etape 1: Adresse IP fixe sur le serveur</a></li><li><a href="#etape-2-installation-du-service-dhcp">Etape 2: Installation du service DHCP</a></li><li><a href="#etape-3-redémarrer-le-service">Etape 3 Redémarrer le service</a><ul><li><a href="#en-ligne-de-commande">en ligne de commande</a></li><li><a href="#console-de-gestion-des-services">Console de gestion des services</a></li><li><a href="#gestionnaire-de-serveur">Gestionnaire de serveur</a></li></ul></li><li><a href="#etape-4-préparation-de-la-configuration-du-service">Etape 4 Préparation de la configuration du service</a><ul><li><a href="#partie-gauche-du-tableau">Partie gauche du tableau</a></li><li><a href="#partie-droite-de-notre-tableau">Partie droite de notre tableau</a></li></ul></li><li><a href="#etape-5-application-de-la-configuration-du-service">Etape 5 Application de la configuration du service</a></li></ul></li></ul></li></ul></nav><hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h1 id="installation-serveur-dhcp">Installation serveur DHCP</h1>
<p><img src="/_resources/55ce94a7d82b43bca9a2d15f83485c32.png" /></p>
<h2 id="attendu">Attendu</h2>
<ul>
<li>1 machine serveur</li>
<li>2 machines clientes (dont 1 raspberry)</li>
<li>Schema du reseau avant la mise en pratique</li>
</ul>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h2 id="a-laide-dun-rogramme-simple">A l'aide d'un rogramme simple</h2>
<p>Si l'on souhaite mettre en place un serveur DHCP rapidement (sans installer un serveur), il est posible de recourir à un programme simple.</p>
<p>Téléchargez le script ci dessous.</p>
<p><a title="http://www.dhcpserver.de/cms/" href="http://www.dhcpserver.de/cms/">http://www.dhcpserver.de/cms/</a></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h2 id="sur-un-serveur-windows-avec-le-service-dhcp">Sur un serveur Windows avec le Service DHCP</h2>
<h3 id="requis">Requis</h3>
<ul>
<li>Serveur Windows 2012</li>
<li>Client Windows 10</li>
</ul>
<h3 id="source">Source</h3>
<p><a title="https://neptunet.fr/dhcp-windows/" href="https://neptunet.fr/dhcp-windows/">https://neptunet.fr/dhcp-windows/</a></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h3 id="etape-1-adresse-ip-fixe-sur-le-serveur">Etape 1: Adresse IP fixe sur le serveur</h3>
<p>Pour cela, on se rend dans les paramètres du système, partie <strong>Centre réseau et partage</strong>.</p>
<p>(Utilisez la zone de recherche, la loupe, à droite du menu démarrer pour y accéder directement).</p>
<p><img src="/_resources/c3c9e48e5f3d473b89fc0f572c9e51e5.png" /></p>
<p>Dans la partie <strong>réseaux actifs</strong>, il n’y a qu’un seul point de connexion ici nommé <em>Ethernet0 2</em>.</p>
<p>Cliquez dessus pour visualiser son état.</p>
<p>Ensuite cliquez sur le bouton <strong>Propriétés</strong></p>
<p><img src="/_resources/382a51d6bd584ca2930bbf928f66e2b1.png" /></p>
<p>Double-cliquez sur l’élément <strong>Protocole internet version 4</strong> pour pouvoir lui définir un adressage IP.</p>
<p><img src="/_resources/5a41420ca8114f02a3a9817229710983.png" /></p>
<p>Cochez <strong>Utiliser l’adresse IP suivante</strong> et assignez une adresse et un masque de sous-réseau.</p>
<blockquote>
<p><strong>Logiquement le serveur DHCP se DOIT d'avoir une adresse IP statique!</strong></p>
</blockquote>
<p>Utilisons le réseau <em>192.168.10.0/24</em>.</p>
<p>Attribuez l’adresse <em>192.168.10.10</em> avec le masque /24, c’est-à-dire 255.255.255.0 au futur serveur DHCP.</p>
<p>Les adresses de passerelle et de DNS sont fictives et n’aboutiront nulle part dans notre contexte, c’est uniquement pour mieux illustrer la réalité.</p>
<p><img src="/_resources/4533185878e34769ac4b9686e815f4d5.png" /></p>
<p>Une fois votre configuration manuelle de l’interface réseau du serveur terminée, cliquez sur OK et fermez toutes les autres fenêtres.</p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h3 id="etape-2-installation-du-service-dhcp">Etape 2: Installation du service DHCP</h3>
<p>Allez dans le <strong>gestionnaire de serveur</strong>.<br />
Celui-ci s’ouvre normalement automatiquement à l’ouverture de session.<br />
Si l’option a été décochée, vous pourrez le retrouver dans le menu démarrer ou en exécutant <strong>servermanager.exe</strong>.</p>
<p>Si vous avez la partie de droite dite « Démarrage rapide », cliquez sur « Ajouter des rôles et des fonctionnalités ».</p>
<p>Si cette partie a été masquée, vous pouvez par le menu « Gérer » en haut à droite du tableau de bord.</p>
<p><img src="/_resources/2c0bee8d2c4d482db4e96ba20b10cb54.png" /></p>
<p>On arrive sur la page « Avant de commencer » qui peut être ignorée.<br />
Cliquez sur Suivant.</p>
<p><img src="/_resources/37a670f9129849c19940288b03335d92.png" /></p>
<p>Le type d’installation que nous allons effectuer est <strong>basé sur un rôle</strong>.<br />
Cochez le <strong>1er cercle</strong> et cliquez sur <strong>Suivant</strong>.</p>
<p><img src="/_resources/8d953fe4130c4bd2be6003e529309874.png" /></p>
<p>On sélectionne le <strong>serveur de destination</strong>.</p>
<p>Ici, nous n’en avons qu’un seul, <strong>serveur de DHCP</strong>.<br />
Cliquez sur <strong>Suivant</strong>.</p>
<p><img src="/_resources/a4a924ccfad24c748fd7da4008f8a3f5.png" /></p>
<p>C’est dans cette partie que nous allons choisir le <strong>rôle serveur DHCP</strong>.<br />
Cochez la case sur la gauche du rôle.</p>
<pre><code>![7b94310dc54349697d1a4bf1855cb3b5.png](:/ef2d1b5df6aa42a98f496abec34560ae)
</code></pre>
<p>Lorsque l’on sélectionne un rôle, l’assistant va nous proposer automatiquement les fonctionnalités requises au bon fonctionnement de ce rôle.</p>
<p>Dans la fenêtre qui s’est ouverte, cliquez sur « <strong>Ajouter les fonctionnalités</strong> ».</p>
<p>Quand le rôle Serveur DHCP est bien coché, cliquez sur <strong>Suivant</strong>.</p>
<p><img src="/_resources/87d53e59474840d78ef31ab9da9be37d.png" /></p>
<p><strong>Passez la fenêtre de sélection des fonctionnalités</strong>, nous n’en avons plus besoin, elles ont été automatiquement ajoutées.</p>
<p>Avant l’installation, le serveur nous propose des petites informations importantes sur le service DHCP que nous avons demandés.</p>
<p>Cliquez sur Suivant.</p>
<p><img src="/_resources/2f2c6542a5514931be065a498f8f477a.png" /></p>
<p>Vérifiez que vous installez bien le rôle demandé ainsi que ses fonctionnalités et cliquez sur <strong>Installer</strong>.</p>
<p><img src="/_resources/5b853c3d24934659a5a45ec1af22c9c1.png" /></p>
<p>Patientez 1 à 2 minutes que l’installation s’effectue.</p>
<pre><code>![f0d78f61bbe62e34e2ea92155a5064aa.png](:/d96644546e7f40228fc34cda24d8f13e)
</code></pre>
<p>Le rôle a bien été installé, mais l’assistant nous demande maintenant d’<strong>effectuer la post-installation du service DHCP</strong>.</p>
<p>Cliquez sur <strong>Terminer la configuration DHCP</strong>.</p>
<p>La post-installation nous spécifie que des <strong>groupes de sécurité,</strong> spécifique au serveur DHCP, doivent être créé sur le serveur.</p>
<p>Cliquez sur Valider.</p>
<p><img src="/_resources/8bb2c876050147faa85f2b0c629bd320.png" /></p>
<p>L’assistant s’est occupé de créer lui-même les groupe dont il a besoin.</p>
<p>Il ne reste qu’à redémarrez le service DHCP pour appliquer les changements.</p>
<p><img src="/_resources/5a31fde079c04135a07a3157ebbcc7df.png" /></p>
<p>Pour redémarrer le service, plusieurs possibilités:</p>
<ul>
<li>passer par la ligne de commande</li>
<li>utiliser la console de gestion des services</li>
<li>ou passer par le gestionnaire de serveur.</li>
</ul>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h3 id="etape-3-redémarrer-le-service">Etape 3 Redémarrer le service</h3>
<h4 id="en-ligne-de-commande">en ligne de commande</h4>
<p>Ouvrez une console Powershell et saisissez la commande : <strong>Restart-Service DHCPServer</strong></p>
<p><img src="/_resources/4a6e9fab150d43f889605f33338d0b77.png" /></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h4 id="console-de-gestion-des-services">Console de gestion des services</h4>
<p>Recherchez « Services » ou exécutez directement <strong>services.msc</strong>.</p>
<p>Cherchez le service appelé <strong>Serveur DHCP</strong>.</p>
<p>Effectuez un clic-droit dessus et cliquez sur <strong>Redémarrer</strong>.</p>
<p><img src="/_resources/be0c670dfd774a7ab6c3c725ca6bcdd0.png" /></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h4 id="gestionnaire-de-serveur">Gestionnaire de serveur</h4>
<p>Allez sur DHCP dans la partie de gauche.</p>
<p><img src="/_resources/06941945748a4077b72247711a738899.png" /></p>
<p>Descendez jusqu’à la zone « <strong>Services</strong> ».<br />
Faites un clic droit sur le service DHCPServer et cliquez sur <strong>Redémarrer les services</strong>.</p>
<p><img src="/_resources/c77f83fac56949c5ada644a5eab80f24.png" /></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h3 id="etape-4-préparation-de-la-configuration-du-service">Etape 4 Préparation de la configuration du service</h3>
<p>Avant de se lancer dans la configuration du service DHCP, il est plus judicieux de <strong>définir en amont</strong> ce qu’on va mettre en place.</p>
<p>En d’autres termes, on va noter la configuration du DHCP avant de l’appliquer.</p>
<p>A partir du document fourni, remplissez le tableau:</p>
<p><img src="/_resources/1f87b074b35043c7b06e35c7eb0c0346.png" /></p>
<h4 id="partie-gauche-du-tableau">Partie gauche du tableau</h4>
<p>Notre réseau est le <strong>192.168.10.0/24</strong>.</p>
<p>Donc, nous allons créer une étendue <strong>192.168.10.0</strong> avec le masque de sous-réseau en <strong>255.255.255.0</strong> et laissez le <strong>bail par défaut</strong> à 8 jours.</p>
<p>Ensuite, on va décider que le DHCP devra distribuer toutes les adresses disponibles dans ce réseau c’est-à-dire de la <strong>192.168.10.1</strong> à la <strong>192.168.10.254</strong>.</p>
<p>Nous allons ensuite ajouter des <strong>options</strong>.</p>
<p>Une <strong>option d’étendue</strong> qui sera l’adresse de la passerelle pour les postes clients, l’option <strong>Routeur</strong> qui aura pour valeur <strong>192.168.10.1</strong> et une option de serveur, l’option <strong>Serveur DNS</strong>, avec la valeur <strong>8.8.8.8</strong> (DNS de Google) ainsi que la valeur <strong>9.9.9.9</strong> (DNS de QuadDNS).</p>
<p><img src="/_resources/aad03937967e471aa19916590327d0d2.png" /></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h4 id="partie-droite-de-notre-tableau">Partie droite de notre tableau</h4>
<p>Définition d'une <strong>plage d’exclusion</strong> des 20 premières adresses du réseau <strong>192.168.10.0/24</strong>.</p>
<p>La place d’exclusion débutera à l’adresse <strong>192.168.10.1</strong> et terminera à l’adresse <strong>192.168.10.20</strong>.</p>
<p>Et pour terminer, une réservation de l’adresse IP <strong>192.168.10.254</strong> pour l’imprimante qui a pour adresse MAC <strong>A1:B2:C3:D4:E5:F6</strong>.</p>
<p><img src="/_resources/5d958b6953a64ba5a023cf7b8b6cc6cd.png" /></p>
<p>Voilà le tableau de la future configuration DHCP complet.</p>
<p><img src="/_resources/7bbd19d9ea1547f3b5c233f73e9eefaa.png" /></p>
<hr />
<div style="page-break-after:always" class="jop-noMdConv"></div>
<h3 id="etape-5-application-de-la-configuration-du-service">Etape 5 Application de la configuration du service</h3>
<p>Ouvrez la console de gestion du service DHCP en exécutant la commande <strong>dhcpmgmt.msc</strong> ou en passant par le gestionnaire de serveur, menu <strong>Outils</strong> en haut à droite et <strong>DHCP</strong>.</p>
<p><img src="/_resources/2ae28a0528454373b746f533d46c4719.png" /></p>
<p>Voici la console de gestion du rôle DHCP :</p>
<p><img src="/_resources/c62960ed83754f649e401accb22b608b.png" /></p>
<p>Développez le nom du serveur DHCP et IPv4.<br />
Faites un clic-droit sur <strong>IPv4</strong> et cliquez sur <strong>Nouvelle Etendue</strong>.</p>
<p><img src="/_resources/be1986cb5595493c89ae350e129c46ef.png" /></p>
<p>Renseignez un <strong>nom</strong> et une <strong>description</strong> pour votre étendue et poursuivez.</p>
<p><img src="/_resources/1a1fd72851bd4980b36728ddad7883dc.png" /></p>
<p>Remplissez la plage d’adresse que l’étendue pourra distribuer et le masque de sous-réseau<br />
(si 255.255.255.0, longueur = 24, si 255.255.0.0, longueur = 16, etc…).</p>
<p>On n'oublie pas de se référer au tableau !</p>
<p><img src="/_resources/f251b6af5b7a44e3b448cc42f1a21222.png" /></p>
<p>Ajoutez la <strong>plage d’exclusions</strong> que nous avons défini.<br />
Renseignez <strong>l’adresse de début et de fin</strong> et cliquez sur <strong>Ajouter</strong> pour voir apparaître la plage dans la zone inférieure.</p>
<p><img src="/_resources/45e4ca7da2794803923ab940245110b5.png" /></p>
<p>On laisse le bail par défaut à 8 jours.<br />
Vous pouvez mettre 1 heure ou même 1 minute si vous le souhaitez.</p>
<p><img src="/_resources/c50aa0329eea4165b9cde026c60db32a.png" /></p>
<p>L’assistant nous demande si vous voulez configurer maintenant ou plus tard des options pour notre étendue.</p>
<p>Nous l'avons déjà fait dans le tableau.</p>
<p><img src="/_resources/eb026929c18d422ea8e0c7348693106b.png" /></p>
<p>La 1ère option proposée par l’assistant est l’option <strong>Routeur</strong> c’est-à-dire la <strong>passerelle</strong> à déclarer à nos clients.</p>
<p>Renseignez l’adresse de la passerelle et poursuivez.</p>
<p><img src="/_resources/2bfca14e62724937b0990ce4f35121be.png" /></p>
<p>Si vous avez un nom de domaine ou si vous avez un serveur DNS spécifique à ce réseau, c’est ici que vous allez le renseignez.</p>
<p>Je ne modifierai pas cette partie ni la suivante concernant le serveur WINS car, même si je n’ai qu’une seule étendue donc que je peux très bien déclarer dès maintenant mon DNS, j’ai choisi d’en faire une option « de serveur » et non pas une option « d’étendue ».</p>
<p><img src="/_resources/c4482499f4734002a3fbdd3bc784a4d6.png" /></p>
<p>Activez dès maintenant l’étendue et cliquez sur Terminer à la dernière fenêtre de l’assistant.</p>
<p><img src="/_resources/db8e3d10a5b94a4bb5277d5a438a2374.png" /></p>
<p>Après quelques secondes, l’étendue sera créée et bien active.</p>
<p>Si vous avez un point d’exclamation bleu, patientez une minute et actualisez la console.</p>
<p><img src="/_resources/d3e1d49ffe894d73a580776b3e3bcc72.png" /></p>
<p>Spécifions l’adresse du DNS.</p>
<p>Faites un clic droit sur <strong>Options de serveur</strong> et cliquez sur <strong>Configurer les options</strong>.</p>
<p><img src="/_resources/76bc562d689b4975a869375065d6b9de.png" /></p>
<p>Dans la liste des options disponible, cochez « <strong>006 Serveurs DNS</strong> ».</p>
<p>Dans la partie inférieure, renseignez l’<strong>adresse IP du serveur DNS</strong> (ici 8.8.8.8 qui n’est qu’une adresse d’illustration).</p>
<p>Une validation de l’adresse IP du DNS sera effectuée.</p>
<p>Une fois terminé, cliquez sur OK.</p>
<p><img src="/_resources/877c5dab32aa4c62af887788eb0f95bc.png" /></p>
<p>Passons à la réservation d’un adresse IP.</p>
<p>Faites un double-clic sur <strong>Réservations</strong> et cliquez sur <strong>Nouvelle réservation</strong>.</p>
<p><img src="/_resources/e820a2be0d1a462480495b5013b6111a.png" /></p>
<p>Saisissez un <strong>nom pour cette réservation</strong>, l’<strong>adresse IP à dédier</strong> et l’<strong>adresse physique, l’adresse MAC</strong>, du client qui devra se voir attribué cette adresse et cliquez sur <strong>Ajouter</strong>.</p>
<p>Une fois la réservation effectuée, les données saisies seront effacées, vous pouvez fermer la fenêtre.</p>
<p><img src="/_resources/8c4aa6a9272748b98a4bf80e13e8154c.png" /></p>
<p>Le serveur est configuré!</p>
<p><img src="/_resources/4b34458c7e0a485586bc346b17afef87.png" /><br />
<img src="/_resources/da44077475c84fae9de0bc6b772bf94f.png" /><br />
<img src="/_resources/d85869145fb346d2a340e40abf1341d8.png" /></p>
</div>
      </article>
    </div>

    <div class="go-top">
    <p class="go-top-text">Retour Haut de page</p>
</div>

    <!-- JQuery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
  </body>
</html>