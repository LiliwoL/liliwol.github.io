<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

<!--Meta Keywords and Description-->
<meta name="keywords" content="formateur php symfony BTS Angular VueJS">
<meta name="description" content="">

<!--Favicon-->
<link rel="shortcut icon" href="/_assets/img/favicon.ico" title="Favicon"/>

<link rel="stylesheet" href="/_assets/main.css" />
    <title>SQL Introduction 1/3 - LiliwoL</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>

  <body>

    <div class="main">

      <nav class="navigation">
        <a href="/">LiliwoL</a>
      </nav>

      <article>
        <header>
          <h1 class="article-title">SQL Introduction 1/3</h1>
          <div class="article-info">
            <div>
              <span
                >Cr√©√© leÔºö<time datetime="1668768263433"
                  >2022-11-18 11:44</time
                ></span
              >
              <span
                >Mis √† jourÔºö<time datetime="1668781165714"
                  >2022-11-18 15:19</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="d√©couverte-du-langage-sql">D√©couverte du langage SQL</h1>
<nav class="table-of-contents"><ul><li><a href="#d√©couverte-du-langage-sql">D√©couverte du langage SQL</a><ul><li><a href="#cr√©er-la-base-de-donn√©es">Cr√©er la base de donn√©es.</a></li><li><a href="#cr√©er-une-table">Cr√©er une table</a><ul><li><a href="#quelques-explications">Quelques explications :</a></li><li><a href="#primary-key-ou-cl√©-primaire">PRIMARY KEY ou Cl√© Primaire</a></li></ul></li><li><a href="#ins√©rer-des-enregistrements-dans-la-table">Ins√©rer des enregistrements dans la table</a><ul><li><a href="#quelques-explications-1">Quelques explications :</a></li></ul></li><li><a href="#lire-le-contenu-dune-table">Lire le contenu d'une table</a></li><li><a href="#a-vous-de-jouer">A vous de jouer</a><ul><li><a href="#foreign-key-ou-cl√©-√©trang√®re">FOREIGN KEY ou Cl√© √©trang√®re</a></li></ul></li><li><a href="#a-vous-de-jouer-1">A vous de jouer</a><ul><li><a href="#la-table-livres">La table LIVRES</a><ul><li><a href="#wrench-travail-√†-r√©aliser">üîß Travail √† r√©aliser</a></li></ul></li><li><a href="#la-table-themes">La table Themes</a><ul><li><a href="#wrench-travail-√†-r√©aliser-1">üîß Travail √† r√©aliser</a></li></ul></li><li><a href="#une-table-manquante">Une table manquante !</a><ul><li><a href="#wrench-travail-√†-r√©aliser-2">üîß Travail √† r√©aliser</a></li></ul></li></ul></li><li><a href="#cardinalit√©">Cardinalit√©</a><ul><li><a href="#a-vous-de-jouer-2">A vous de jouer</a></li><li><a href="#table-de-relation">Table de relation</a></li></ul></li><li><a href="#correction">Correction</a></li></ul></li></ul></nav><hr />
<p>Dans ce TP jous allons d√©couvrir le langage <strong>SQL</strong> (<em>Structured Query Language</em>) qui est le langage utilis√© pour effectuer des requ√™tes sur une base de donn√©es relationnelles.</p>
<p>Nous apprendrons lors de ce TP √†:</p>
<ul>
<li>cr√©er des tables avec les attributs que l'on souhaite</li>
<li>ins√©rer des enregistrements</li>
<li>faire des requ√™tes sur la base pour extraire des informations</li>
</ul>
<hr />
<h2 id="cr√©er-la-base-de-donn√©es">Cr√©er la base de donn√©es.</h2>
<p>Nous allons commencer par cr√©er une base vide dans laquelle nous allons travailler :</p>
<div><pre class="hljs"><code><span class="hljs-comment">/* Create database */</span>
<span class="hljs-keyword">CREATE</span> DATABASE Livres;</code></pre></div>
<p>La base s'appelle <strong>Livres</strong>.</p>
<p>Cette base sera constitu√©e de 4 tables :</p>
<ul>
<li>Auteurs</li>
<li>Livres</li>
<li>Langues</li>
<li>Themes</li>
</ul>
<h2 id="cr√©er-une-table">Cr√©er une table</h2>
<p>Il est temps de commencer √† peupler notre base de donn√©es.</p>
<p>Nous allons commencer par cr√©er la table <strong>Langues</strong> en saisissant notre premi√®re requ√™te :</p>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Langues 
(
    IdLangue <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    Langue <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),
    <span class="hljs-keyword">PRIMARY</span> KEY (IdLangue)
);</code></pre></div>
<p><img src="/_resources/29c368afbc4f43e881087ee7e46a7a22.png" /></p>
<h3 id="quelques-explications">Quelques explications :</h3>
<p>La premi√®re requ√™te <strong>SQL</strong> que nous allons apprendre est la requ√™te <code>CREATE TABLE</code></p>
<ul>
<li>on indique le nom de la table √† cr√©er</li>
<li>entre parenth√®se on liste les <em>attributs</em> √† mettre ainsi que leur <em>type</em>.</li>
<li>une requ√™te se termine <strong>toujours</strong> par ;</li>
</ul>
<p>Nous avons deux types diff√©rents dans notre base de donn√©es :</p>
<ul>
<li>le type <strong>VARCHAR</strong> avec une longueur sp√©cifi√©e pour tout ce qui est cha√Æne de caract√®res</li>
<li>le type <strong>INTEGER</strong> pour les entiers</li>
</ul>
<h3 id="primary-key-ou-cl√©-primaire">PRIMARY KEY ou Cl√© Primaire</h3>
<p>L'attribut <strong>IdLangue</strong> est la <em>cl√© primaire</em> de la table.<br />
C'est un entier qui commence √† 1 et qui sera <strong>automatiquement incr√©ment√©</strong> au fur √† mesure que l'on ins√®re des donn√©es dans la table.<br />
C'est en indiquant <code>PRIMARY KEY</code> apr√®s le type dans la d√©claration de l'attribut <strong>IdLangue</strong> que le syst√®me de base de donn√©es se comporte ainsi.</p>
<hr />
<h2 id="ins√©rer-des-enregistrements-dans-la-table">Ins√©rer des enregistrements dans la table</h2>
<p>Maintenant que nous avons une table vide, il nous faut la remplir avec les donn√©es sur les auteurs.</p>
<p>Nous utiliserons pour cela la requ√™te <strong>INSERT</strong>. Voici son utilisation :</p>
<div><pre class="hljs"><code><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Langues 
    (Langue)
<span class="hljs-keyword">VALUES</span>
    ("Anglais"),
    ("Fran√ßais");</code></pre></div>
<hr />
<h3 id="quelques-explications-2">Quelques explications :</h3>
<p>La requ√™te <strong>INSERT</strong> s'utilise ainsi :</p>
<div><pre class="hljs"><code><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> ##<span class="hljs-keyword">TABLE</span>##
    (## attributs dont <span class="hljs-keyword">on</span> donne les valeurs##)
<span class="hljs-keyword">VALUES</span>
    (## enregistrement <span class="hljs-number">1</span> ##),
    ...
    (## enregistrement n ##);</code></pre></div>
<p>On peut refaire une autre requ√™te <strong>INSERT</strong> √† la suite si on souhaite ajouter encore des donn√©es au bout de la table.</p>
<p>Vous remarquez que l'on ne donne pas de valeur pour l'attribut <strong>IdLangue</strong>. C'est parce qu'on l'a d√©clar√© en <code>PRIMARY KEY</code>.<br />
Il est donc <strong>automatiquement g√©r√©</strong> par le syst√®me de base de donn√©es.</p>
<p>Nous verrons cela en lisant le contenu complet de la table.</p>
<p>On est pas oblig√© de pr√©ciser tous les attributs.<br />
<strong>IdLangue</strong> est un exemple particulier, mais il est possible d'omettre d'autres attributs.<br />
Ils seront alors affect√©s d'une valeur <strong>nulle</strong>.</p>
<p>A l'issue de la requ√™te, le serveur nous informe que 2 lignes ont √©t√© cr√©√©es.</p>
<p><img src="/_resources/e9ba99920ce14809960d7fbda82e236f.png" /></p>
<hr />
<h2 id="lire-le-contenu-dune-table">Lire le contenu d'une table</h2>
<p>Nous allons √† pr√©sent utiliser une requ√™te <strong>SELECT</strong> afin de r√©cup√©rer le contenu de la table.</p>
<p>Ces requ√™tes peuvent √™tre tr√®s sophistiqu√©es comme on va le voir en fin de TP. Pour le moment, nous nous contenterons de la forme la plus simple :</p>
<div><pre class="hljs"><code><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Langues;</code></pre></div>
<p>Vous voyez donc appra√Ætre le contenu de la table.<br />
Vous constatez que la cl√© primaire <strong>IdLangue</strong> a bien √©t√© g√©n√©r√©e correctement.</p>
<p><img src="/_resources/a7c58c6511234c579c96115154a4a91c.png" /></p>
<hr />
<h2 id="a-vous-de-jouer">A vous de jouer</h2>
<p>Cr√©ez la table <strong>Auteurs</strong> afin que celle-ci refl√®te les informations suivantes :</p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Prenom</th>
<th>annee naissance</th>
<th>langue</th>
</tr>
</thead>
<tbody>
<tr>
<td>Orwell</td>
<td>George</td>
<td>1903</td>
<td>Anglais</td>
</tr>
<tr>
<td>Herbert</td>
<td>Frank</td>
<td>1920</td>
<td>Anglais</td>
</tr>
<tr>
<td>Asimov</td>
<td>Isaac</td>
<td>1920</td>
<td>Anglais</td>
</tr>
<tr>
<td>Huxley</td>
<td>Aldous</td>
<td>1894</td>
<td>Anglais</td>
</tr>
<tr>
<td>Bradbury</td>
<td>Ray</td>
<td>1920</td>
<td>Anglais</td>
</tr>
<tr>
<td>K. Dick</td>
<td>Philip</td>
<td>1928</td>
<td>Anglais</td>
</tr>
<tr>
<td>Barjavel</td>
<td>Ren√©</td>
<td>1911</td>
<td>Fran√ßais</td>
</tr>
<tr>
<td>Boulle</td>
<td>Pierre</td>
<td>1912</td>
<td>Fran√ßais</td>
</tr>
<tr>
<td>Van Vogt</td>
<td>Alfred Elton</td>
<td>1912</td>
<td>Anglais</td>
</tr>
<tr>
<td>Verne</td>
<td>Jules</td>
<td>1828</td>
<td>Fran√ßais</td>
</tr>
</tbody>
</table>
<p>Pour cela, vous utiliserez la commande suivante pour cr√©er la table et vous adapterez les donn√©es √† cette structure.</p>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Auteurs (
    IdAuteur       <span class="hljs-type">INTEGER</span>  <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    NomAuteur      TEXT,
    PrenomAuteur   TEXT,
    IdLangue       <span class="hljs-type">INTEGER</span>,
    AnneeNaissance <span class="hljs-type">INTEGER</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY(IdLangue) <span class="hljs-keyword">REFERENCES</span> Langues(IdLangue)
);</code></pre></div>
<h3 id="foreign-key-ou-cl√©-√©trang√®re">FOREIGN KEY ou Cl√© √©trang√®re</h3>
<p>Une nouveaut√© appara√Æt ici dans la cr√©ation de la table :<br />
La table <strong>Auteurs</strong> poss√®de une <em><strong>cl√© √©tang√®re</strong></em> : <em>IdLangue</em>.</p>
<p>Cette cl√© est un entier.</p>
<p>Remarquez la ligne <code>FOREIGN KEY(IdLangue) REFERENCES Langues(IdLangue)</code>.</p>
<p>Celle-ci permet de d√©clarer une <em>contrainte</em> sur cette cl√© afin d'indiquer √†au serveur que <em>IdLangue</em> est une <strong>cl√© √©trang√®re</strong>.</p>
<p>Le serveur sera alors r<strong>esponsable de maintenir la coh√©rence entre les deux tables</strong> que l'on a ainsi reli√©e.</p>
<p>Cette d√©claration n'est pas obligatoire mais <strong>fortement conseill√©e</strong>.</p>
<hr />
<h2 id="a-vous-de-jouer-2">A vous de jouer</h2>
<p>Notre base n'est pas encore compl√®te :<br />
il nous reste √† cr√©er les tables <strong>Livres</strong> et <strong>Themes</strong> qui doivent refl√©ter le contenu suivant :</p>
<table>
<thead>
<tr>
<th>Titre</th>
<th>NomAuteur</th>
<th>PrenomAuteur</th>
<th>AnneeNaissance</th>
<th>Langue</th>
<th>AnneePubli</th>
<th>Themes</th>
</tr>
</thead>
<tbody>
<tr>
<td>1984</td>
<td>Orwell</td>
<td>George</td>
<td>1903</td>
<td>Anglais</td>
<td>1949</td>
<td>Totalitarisme, science-fiction, anticipation, Dystopie</td>
</tr>
<tr>
<td>Dune</td>
<td>Herbert</td>
<td>Frank</td>
<td>1920</td>
<td>Anglais</td>
<td>1965</td>
<td>science-fiction, anticipation</td>
</tr>
<tr>
<td>Fondation</td>
<td>Asimov</td>
<td>Isaac</td>
<td>1920</td>
<td>Anglais</td>
<td>1951</td>
<td>science-fiction, Economie</td>
</tr>
<tr>
<td>Le meilleur des mondes</td>
<td>Huxley</td>
<td>Aldous</td>
<td>1894</td>
<td>Anglais</td>
<td>1931</td>
<td>Totalitarisme, science fiction, dystopie</td>
</tr>
<tr>
<td>Fahrenheit 451</td>
<td>Bradbury</td>
<td>Ray</td>
<td>1920</td>
<td>Anglais</td>
<td>1953</td>
<td>science-fiction, Dystopie</td>
</tr>
<tr>
<td>Ubik</td>
<td>K. Dick</td>
<td>Philip</td>
<td>1928</td>
<td>Anglais</td>
<td>1969</td>
<td>science-fiction, anticipation</td>
</tr>
<tr>
<td>Chroniques martiennes</td>
<td>Bradbury</td>
<td>Ray</td>
<td>1920</td>
<td>Anglais</td>
<td>1950</td>
<td>science-fiction, anticipation</td>
</tr>
<tr>
<td>La nuit des temps</td>
<td>Barjavel</td>
<td>Ren√©</td>
<td>1911</td>
<td>Fran√ßais</td>
<td>1968</td>
<td>science-fiction, trag√©die</td>
</tr>
<tr>
<td>Blade Runner</td>
<td>K. Dick</td>
<td>Philip</td>
<td>1928</td>
<td>Anglais</td>
<td>1968</td>
<td>Intelligence artificielle, science fiction</td>
</tr>
<tr>
<td>Les Robots</td>
<td>Asimov</td>
<td>Isaac</td>
<td>1920</td>
<td>Anglais</td>
<td>1950</td>
<td>science fiction, Intelligence artificielle</td>
</tr>
<tr>
<td>La Plan√®te des singes</td>
<td>Boulle</td>
<td>Pierre</td>
<td>1912</td>
<td>Fran√ßais</td>
<td>1963</td>
<td>science fiction, Dystopie</td>
</tr>
<tr>
<td>Ravage</td>
<td>Barjavel</td>
<td>Ren√©</td>
<td>1911</td>
<td>Fran√ßais</td>
<td>1943</td>
<td>Science-Fiction, anticipation</td>
</tr>
<tr>
<td>Le Ma√Ætre du Haut Ch√¢teau</td>
<td>K. Dick</td>
<td>Philip</td>
<td>1928</td>
<td>Anglais</td>
<td>1962</td>
<td>Dystopie, Uchronie</td>
</tr>
<tr>
<td>Le monde des A</td>
<td>Van Vogt</td>
<td>Alfred Elton</td>
<td>1912</td>
<td>Anglais</td>
<td>1945</td>
<td>science fiction, IA</td>
</tr>
<tr>
<td>La Fin de l‚Äô√©ternit√©</td>
<td>Asimov</td>
<td>Isaac</td>
<td>1920</td>
<td>Anglais</td>
<td>1955</td>
<td>science-fiction, voyage dans le temps</td>
</tr>
<tr>
<td>De la Terre √† la Lune</td>
<td>Verne</td>
<td>Jules</td>
<td>1828</td>
<td>Fran√ßais</td>
<td>1865</td>
<td>Science-Fiction, aventure</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="la-table-livres">La table LIVRES</h3>
<p>La table <strong>LIVRES</strong> devra avoir la structure d√©crite dans l'extrait suivant :</p>
<table>
<thead>
<tr>
<th>IdLivre</th>
<th>Titre</th>
<th>IdAuteur</th>
<th>AnneePubli</th>
</tr>
</thead>
<tbody>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>8</td>
<td>La nuit des temps</td>
<td>7</td>
<td>1968</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<ul>
<li>l'ann√©e de publication est de type <strong>INTEGER</strong></li>
<li><strong>IdLivre</strong> d√©signe bien s√ªr la cl√© primaire</li>
<li><strong>IdAuteur</strong> est une <em>cl√© externe</em> faisant r√©f√©rence √† l'auteur.</li>
<li>dans l'extrait, la cl√© <strong>IdAuteur</strong> vaut 7. L'auteur de <em>La nuit des temps</em> est donc <em>Barjavel</em></li>
<li>on ne renseigne pas la langue ou l'ann√©e de naissance de l'auteur car ces informations sont d√©j√† pr√©sentes dans la table <strong>Auteurs</strong>.</li>
<li>On traitera la probl√©matique des th√®mes plus tard...</li>
</ul>
<p>Dans la cellule ci-dessous, saisissez la requ√™te pour cr√©er la table <strong>Livres</strong></p>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Livres (
    IdLivre       <span class="hljs-type">INTEGER</span>  <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    Titre      TEXT,
    IdAuteur	<span class="hljs-type">INTEGER</span>,
    AnneePubli      <span class="hljs-type">INTEGER</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY(IdAuteur) <span class="hljs-keyword">REFERENCES</span> Auteurs(IdAuteur)
);</code></pre></div>
<p>On commence √† avoir les liaisons entre les tables correpondant √†:</p>
<p><img src="/_resources/491765d9614a415e9f816ab57b7b0c84.png" /></p>
<p>A pr√©sent, saisissez les donn√©es √† l'int√©rieur des tables.</p>
<div><pre class="hljs"><code># Dans la <span class="hljs-keyword">table</span> Auteurs
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Orwell'</span>, <span class="hljs-string">'George'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1903'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Asimov'</span>, <span class="hljs-string">'Isaac'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1920'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Huxley'</span>, <span class="hljs-string">'Aldous'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1894'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Bradbury'</span>, <span class="hljs-string">'Ray'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1920'</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Boulle'</span>, <span class="hljs-string">'Pierre'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'1912'</span>);</code></pre></div>
<p>Dans la table <strong>Livres</strong>:</p>
<div><pre class="hljs"><code><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Livres` 
(`IdLivre`, `Titre`, `IdAuteur`, `AnneePubli`) <span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'1984'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'1949'</span>),
(<span class="hljs-string">'Le meilleur des mondes'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'1931'</span>),
(<span class="hljs-string">'Chroniques martiennes'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'1950'</span>),
(<span class="hljs-string">'La plan√®te des singes'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'1963'</span>);</code></pre></div>
<p>V√©rifiez votre travail en listant tous les enregistrements de la table <strong>LIVRES</strong> avec la requ√™te suivante:</p>
<div><pre class="hljs"><code><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Livres;</code></pre></div>
<p><img src="/_resources/563466c484fb4680b6c58a26839f762d.png" /></p>
<hr />
<blockquote>
<h4 id="wrench-travail-√†-r√©aliser">üîß <strong>Travail √† r√©aliser</strong></h4>
<p>Compl√©tez la saisie avec toutes les donn√©es fournies dans le tableau global pour vous entra√Æner.<br />
Tous les livres, tous les auteurs.</p>
</blockquote>
<hr />
<h3 id="la-table-themes">La table Themes</h3>
<p>Traitons √† pr√©sent la probl√©matique des <strong>Th√®mes</strong>.</p>
<p>La table <strong>Themes</strong> devra avoir la structure d√©crite dans l'extrait suivant :</p>
<table>
<thead>
<tr>
<th>IdTheme</th>
<th>Intitule</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Science-fiction</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>IdTheme</strong> d√©signe bien s√ªr la <strong>cl√© primaire</strong></li>
<li><strong>Intitule</strong> est un champ texte contenant l'<strong>intitul√©</strong> du th√®me tel qu'il appara√Æt dans le tableau global.</li>
</ul>
<p>Vous saisirez donc 2 requ√™tes :</p>
<ul>
<li>Une pour <strong>cr√©er</strong> la table Themes</li>
<li>Une pour <strong>ins√©rer</strong> les donn√©es dans la table.</li>
</ul>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Themes (
    IdTheme       <span class="hljs-type">INTEGER</span>  <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    Intitule      TEXT
);</code></pre></div>
<hr />
<blockquote>
<h4 id="wrench-travail-√†-r√©aliser-2">üîß <strong>Travail √† r√©aliser</strong></h4>
<p>R√©alisez la requ√™te d'insertion des donn√©es dans la table <strong>Themes</strong></p>
</blockquote>
<div><pre class="hljs"><code><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`Intitule`) <span class="hljs-keyword">VALUES</span>
(<span class="hljs-string">'Science-fiction'</span>), (<span class="hljs-string">'Totalitarisme'</span>), (<span class="hljs-string">'Anticipation'</span>), (<span class="hljs-string">'Dystopie'</span>), (<span class="hljs-string">'Economie'</span>), (<span class="hljs-string">'Trag√©die'</span>), (<span class="hljs-string">'Intelligence artificielle'</span>), (<span class="hljs-string">'Uchronie'</span>), (<span class="hljs-string">'Voyage dans le temps'</span>), ( <span class="hljs-string">'Aventure'</span>);</code></pre></div>
<hr />
<p>V√©rifiez votre travail en lisant tous les enregistrements de la table <strong>Themes</strong>.</p>
<div><pre class="hljs"><code><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Themes;</code></pre></div>
<p><img src="/_resources/5679c7526468438aad4e5d56068ae7a2.png" /></p>
<hr />
<h3 id="une-table-manquante">Une table manquante !</h3>
<p>La saisie de notre base de donn√©es est incompl√®te !</p>
<p>Nous avons en effet saisi tous les <strong>auteurs</strong>, tous les <strong>livres</strong>, toutes les <strong>langues</strong>, tous les <strong>th√®mes</strong> et pourtant il manque une information.</p>
<p>Laquelle ?</p>
<p>Quelle solution envisager pour saisir cette information ?</p>
<p>Cr√©er une table <strong>RelationsLivreTheme</strong> mettant en relation les livres et les th√®mes associ√©s.</p>
<p>On utilisera pour cela les <strong>cl√©s √©trang√®res</strong>.</p>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> RelationsLivreTheme (
    IdTheme      <span class="hljs-type">INTEGER</span>  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    IdLivre				<span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
      
    <span class="hljs-keyword">FOREIGN</span> KEY(IdTheme) <span class="hljs-keyword">REFERENCES</span> Themes(IdTheme),
      <span class="hljs-keyword">FOREIGN</span> KEY(IdLivre) <span class="hljs-keyword">REFERENCES</span> Livres(IdLivre)      
);</code></pre></div>
<p><img src="/_resources/486a41e1a61c4dbdab23e970a3229876.png" /></p>
<hr />
<blockquote>
<h4 id="wrench-travail-√†-r√©aliser-3">üîß <strong>Travail √† r√©aliser</strong></h4>
<p>Saisir le contenu de la table <strong>RelationLivreTheme</strong></p>
</blockquote>
<hr />
<h2 id="cardinalit√©">Cardinalit√©</h2>
<p>En regardant notre base de donn√©es et les relations que nous avons cr√©√© entre les tables, on remarque que celles-ci ont des <em>cardinalit√©s</em> diff√©rentes.</p>
<blockquote>
<p>La <em>cardinalit√©</em> d'une relation entre deux tables <strong>A</strong> et <strong>B</strong> exprime √† combien d'enregistrements de <strong>A</strong> peut √™tre reli√© chaque enregistrement de <strong>B</strong>.</p>
</blockquote>
<p>Par exemple, √† un <strong>livre</strong> est associ√© un <strong>auteur</strong> unique, mais pour un auteur donn√©, il peut y avoir plusieurs livres.<br />
On parle alors de <strong>relation de 1 √† n</strong></p>
<p>Lorsque plusieurs enregistrements de la table <strong>A</strong> peuvent √™tre associ√©s √† plusieurs enregistrements de la table <strong>B</strong>, on parle alors d'une <strong>relation de n √† n</strong></p>
<hr />
<h3 id="a-vous-de-jouer-3">A vous de jouer</h3>
<p>Citez dans la base de donn√©es</p>
<ul>
<li>une relation de 1 √† n</li>
<li>une relation de n √† n</li>
</ul>
<hr />
<h3 id="table-de-relation">Table de relation</h3>
<p>Pour une <strong>relation de n √† n</strong>, nous aurons en g√©n√©ral recours √† la cr√©ation d'une <strong>nouvelle table de relation</strong> contenant les cl√©s externes des tables √† mettre en relation.</p>
<p>C'est ce que nous avons mis en oeuvre pour la table <strong>RelationsLivreTheme</strong>.</p>
<hr />
<h2 id="correction">Correction</h2>
<div><pre class="hljs"><code><span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">0</span>;
<span class="hljs-keyword">START</span> TRANSACTION;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Auteurs` (
  `IdAuteur` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `NomAuteur` text,
  `PrenomAuteur` text,
  `IdLangue` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `AnneeNaissance` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`IdAuteur`, `NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'Orwell'</span>, <span class="hljs-string">'George'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1903</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`IdAuteur`, `NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'Asimov'</span>, <span class="hljs-string">'Isaac'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1920</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`IdAuteur`, `NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'Huxley'</span>, <span class="hljs-string">'Aldous'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1894</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`IdAuteur`, `NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">4</span>, <span class="hljs-string">'Bradbury'</span>, <span class="hljs-string">'Ray'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1920</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Auteurs` (`IdAuteur`, `NomAuteur`, `PrenomAuteur`, `IdLangue`, `AnneeNaissance`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">5</span>, <span class="hljs-string">'Boulle'</span>, <span class="hljs-string">'Pierre'</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1912</span>);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Langues` (
  `IdLangue` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `Langue` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Langues` (`IdLangue`, `Langue`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'Anglais'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Langues` (`IdLangue`, `Langue`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'Fran√ßais'</span>);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Livres` (
  `IdLivre` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `Titre` text,
  `IdAuteur` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,
  `AnneePubli` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Livres` (`IdLivre`, `Titre`, `IdAuteur`, `AnneePubli`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'1984'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1949</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Livres` (`IdLivre`, `Titre`, `IdAuteur`, `AnneePubli`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'Le meilleur des mondes'</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1931</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Livres` (`IdLivre`, `Titre`, `IdAuteur`, `AnneePubli`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'Chroniques martiennes'</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1950</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Livres` (`IdLivre`, `Titre`, `IdAuteur`, `AnneePubli`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">4</span>, <span class="hljs-string">'La plan√®te des singes'</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1963</span>);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `RelationsLivreTheme` (
  `IdTheme` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `IdLivre` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Themes` (
  `idTheme` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `Intitule` text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'Science-fiction'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'Totalitarisme'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'Anticipation'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">4</span>, <span class="hljs-string">'Dystopie'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">5</span>, <span class="hljs-string">'Economie'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">6</span>, <span class="hljs-string">'Trag√©die'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">7</span>, <span class="hljs-string">'Intelligence artificielle'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">8</span>, <span class="hljs-string">'Uchronie'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">9</span>, <span class="hljs-string">'Voyage dans le temps'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `Themes` (`idTheme`, `Intitule`) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">10</span>, <span class="hljs-string">'Aventure'</span>);


<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Auteurs`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY (`IdAuteur`),
  <span class="hljs-keyword">ADD</span> KEY `IdLangue` (`IdLangue`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Langues`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY (`IdLangue`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Livres`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY (`IdLivre`),
  <span class="hljs-keyword">ADD</span> KEY `IdAuteur` (`IdAuteur`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `RelationsLivreTheme`
  <span class="hljs-keyword">ADD</span> KEY `IdTheme` (`IdTheme`),
  <span class="hljs-keyword">ADD</span> KEY `IdLivre` (`IdLivre`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Themes`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY (`idTheme`);


<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Auteurs`
  MODIFY `IdAuteur` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Langues`
  MODIFY `IdLangue` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Livres`
  MODIFY `IdLivre` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Themes`
  MODIFY `idTheme` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT;


<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Auteurs`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `auteurs_ibfk_1` <span class="hljs-keyword">FOREIGN</span> KEY (`IdLangue`) <span class="hljs-keyword">REFERENCES</span> `Langues` (`IdLangue`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Livres`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `livres_ibfk_1` <span class="hljs-keyword">FOREIGN</span> KEY (`IdAuteur`) <span class="hljs-keyword">REFERENCES</span> `Auteurs` (`IdAuteur`);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `RelationsLivreTheme`
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `relationslivretheme_ibfk_1` <span class="hljs-keyword">FOREIGN</span> KEY (`IdTheme`) <span class="hljs-keyword">REFERENCES</span> `Themes` (`idTheme`),
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `relationslivretheme_ibfk_2` <span class="hljs-keyword">FOREIGN</span> KEY (`IdLivre`) <span class="hljs-keyword">REFERENCES</span> `Livres` (`IdLivre`);
<span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
<span class="hljs-keyword">COMMIT</span>;</code></pre></div>
</div>
      </article>
    </div>
  </body>
</html>